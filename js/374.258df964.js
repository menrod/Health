"use strict";(globalThis["webpackChunkmyhealth"]=globalThis["webpackChunkmyhealth"]||[]).push([[374],{1009:(e,a,l)=>{l.d(a,{s:()=>o});var t=l(705);const o=(0,t.nY)("userAuth",{state:()=>({user:{id:"",role:"",patients:[]}}),getters:{getData:e=>e.user},actions:{logout(){localStorage.clear()},setData(e){this.$state.user={id:e.id??"",role:e.role??"",patients:e.patients??[]}},loadData(){return localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):{}}}})},5374:(e,a,l)=>{l.r(a),l.d(a,{default:()=>w});var t=l(1347),o=l(4187),i=l(3031),d=l(1009),s=l(144),n=l(9667);const r={class:"q-pa-md q-gutter-md"},u=(0,t.pM)({__name:"admissionsPage",setup(e){const a=new Date,l=(0,d.s)(),u=(0,o.KR)({id:"",role:"",patients:[""]}),c=(0,o.KR)(),m=(0,o.KR)([]),p=[{name:"hospital_name",label:"Hospital Name",align:"left",field:"hospital_name",sortable:!0},{name:"final_diagnosis",label:"Final Diagnosis",align:"left",field:"final_diagnosis",sortable:!0},{name:"date_admitted",label:"Date Admitted",align:"left",field:"date_admitted",sortable:!0},{name:"date_discharged",label:"Date Discharged",align:"left",field:"date_discharged",sortable:!0}],g=(0,o.KR)(!1),b=(0,o.KR)({id:"",hospital_name:"",final_diagnosis:"",date_admitted:(0,o.KR)(a),date_discharged:(0,o.KR)(a)});async function h(){if(u.value){const{data:e,error:a}=await i.supabase.from("HospitalAdmission").select("*").eq("id",u.value.id);a?console.log("Admission",a):(m.value=e,console.log("Admission",m))}}async function _(){if(s.A.create({spinner:n.A,message:"Working...",position:"top",timeout:1e3}),u.value){b.value.id=u.value.id;const{error:e}=await i.supabase.from("HospitalAdmission").insert(b.value);e?s.A.create({color:"negative",message:"Danger can't add record",position:"top"}):(s.A.create({color:"posteal",message:"Added new medication record",position:"top"}),await h())}else s.A.create({message:"Kindly logout and relogin",position:"top"})}function f(){b.value.date_admitted=a,b.value.date_discharged=a,b.value.hospital_name="",b.value.final_diagnosis="",b.value.id="",g.value=!1}return(0,t.sV)(async()=>{await l.loadData(),u.value=l.getData,console.log("user",u.value.id),await h()}),(e,a)=>{const l=(0,t.g2)("q-card-section"),o=(0,t.g2)("q-icon"),i=(0,t.g2)("q-input"),d=(0,t.g2)("q-btn"),s=(0,t.g2)("q-table"),n=(0,t.g2)("q-date"),u=(0,t.g2)("q-card-actions"),h=(0,t.g2)("q-card"),v=(0,t.g2)("q-dialog"),A=(0,t.g2)("q-page"),k=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(A,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",r,[(0,t.bF)(h,{bordered:"",class:"col-12"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>a[7]||(a[7]=[(0,t.Lk)("div",{class:"text-h6"},"Admissions",-1)])),_:1,__:[7]}),(0,t.bF)(l,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,{flat:"",rows:m.value,columns:p,"no-data-label":"I didn't find anything for you",filter:c.value,"rows-per-page-options":[3,6,9,10,0],"row-key":"name",dark:"",color:"primary"},{"top-right":(0,t.k6)(()=>[(0,t.bF)(i,{dark:"",borderless:"",debounce:"300",modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),placeholder:"Search"},{append:(0,t.k6)(()=>[(0,t.bF)(o,{name:"search"})]),_:1},8,["modelValue"]),(0,t.bF)(d,{color:"primary",label:"add",onClick:a[1]||(a[1]=e=>g.value=!0)})]),_:1},8,["rows","filter"]),(0,t.bF)(v,{modelValue:g.value,"onUpdate:modelValue":a[6]||(a[6]=e=>g.value=e),persistent:""},{default:(0,t.k6)(()=>[(0,t.bF)(h,{style:{"min-width":"350px"}},{default:(0,t.k6)(()=>[(0,t.bF)(l,{class:"items-center text-dark"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{bordered:"",modelValue:b.value.hospital_name,"onUpdate:modelValue":a[2]||(a[2]=e=>b.value.hospital_name=e),label:"Hospital Name:",placeholder:"(Example City Hospital)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(i,{bordered:"",modelValue:b.value.final_diagnosis,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value.final_diagnosis=e),label:"Final Diagnosis:",placeholder:"(Example Flu, etc..)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),a[8]||(a[8]=(0,t.Lk)("br",null,null,-1)),(0,t.bF)(n,{title:"Date Admitted:",subtitle:"Date patient was admitted",modelValue:b.value.date_admitted,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value.date_admitted=e)},null,8,["modelValue"]),(0,t.bF)(n,{title:"Date Discharged:",subtitle:"Date patient was discharged",modelValue:b.value.date_discharged,"onUpdate:modelValue":a[5]||(a[5]=e=>b.value.date_discharged=e)},null,8,["modelValue"])]),_:1,__:[8]}),(0,t.bF)(u,{align:"right"},{default:(0,t.k6)(()=>[(0,t.bo)((0,t.bF)(d,{flat:"",label:"Cancel",color:"primary",onClick:f},null,512),[[k]]),(0,t.bF)(d,{flat:"",label:"Add Admission Record",color:"primary",onClick:_})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})}}});var c=l(5013),m=l(3341),p=l(222),g=l(3261),b=l(6067),h=l(3933),_=l(9039),f=l(45),v=l(5626),A=l(5034),k=l(8657),F=l(272),D=l.n(F);const V=u,w=V;D()(u,"components",{QPage:c.A,QCard:m.A,QCardSection:p.A,QTable:g.A,QInput:b.A,QIcon:h.A,QBtn:_.A,QDialog:f.A,QDate:v.A,QCardActions:A.A}),D()(u,"directives",{ClosePopup:k.A})}}]);