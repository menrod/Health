"use strict";(globalThis["webpackChunkmyhealth"]=globalThis["webpackChunkmyhealth"]||[]).push([[245],{1009:(e,a,l)=>{l.d(a,{s:()=>o});var t=l(705);const o=(0,t.nY)("userAuth",{state:()=>({user:{id:"",role:"",patients:[]}}),getters:{getData:e=>e.user},actions:{logout(){localStorage.clear()},setData(e){this.$state.user={id:e.id??"",role:e.role??"",patients:e.patients??[]}}}})},9245:(e,a,l)=>{l.r(a),l.d(a,{default:()=>M});var t=l(1347),o=l(7763),i=l(4187),n=l(3031),d=l(1009),s=l(891),u=l(144),r=l(9667);const c={class:"q-pa-md q-gutter-md"},m={class:"col-12"},g=(0,t.pM)({__name:"profilePage",setup(e){const a=new Date,l=(0,d.s)(),g=(0,i.KR)({id:"",role:"",patients:[""]}),v=(0,i.KR)({fullname:"",birth_date:"",gender:"",contact_no:""}),p=(0,i.KR)(!1),b=(0,i.KR)(),f=(0,i.KR)([]),_=[{name:"medication",label:"Medication (Generic/Brand Name)",align:"left",field:"medication"},{name:"dose",label:"Dose",align:"left",field:"dose"},{name:"frequency",label:"Frequency",align:"left",field:"frequency"},{name:"timing",label:"Timing",align:"left",field:"timing"},{name:"duration",label:"Duration",align:"left",field:"duration"},{name:"special_instructions",label:"Special Instructions",align:"left",field:"special_instructions"},{name:"date_issued",label:"Date Issued",align:"left",field:"date_issued",sortable:!0}],h=(0,i.KR)({id:"",medication:"",dose:"",frequency:"",timing:"",duration:"",special_instructions:"",date_issued:(0,i.KR)(a)}),k=(0,i.KR)({hospital_name:"",date_admitted:"",date_discharged:"",final_diagnosis:""});async function A(){if(g.value){const{data:e,error:a}=await n.supabase.from("Medications").select("*").eq("id",g.value.id);a?console.log("Medication",a):(f.value=e,console.log("Medication",f))}}async function V(){if(u.A.create({spinner:r.A,message:"Working...",position:"top",timeout:1e3}),g.value){h.value.id=g.value.id;const{error:e}=await n.supabase.from("Medications").insert(h.value);e?u.A.create({color:"negative",message:"Danger can't add record",position:"top"}):(u.A.create({color:"posteal",message:"Added new medication record",position:"top"}),D(),await A())}else u.A.create({message:"Kindly logout and relogin",position:"top"})}function D(){h.value.medication="",h.value.dose="",h.value.frequency="",h.value.timing="",h.value.duration="",h.value.special_instructions=""}async function F(){if(g.value){const{data:e,error:a}=await n.supabase.from("HospitalAdmission").select("*").eq("id",g.value.id).order("date_admitted",{ascending:!0}).limit(1);a?console.log("LatestAdmission",a):(k.value=e[0],console.log("LatestAdmission",e))}}return(0,t.sV)(async()=>{console.log("Now",s.Ay.formatDate(a,"YYYY/MM/DD"));try{if(g.value=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):{},console.log("user",g.value),g.value.id||(g.value=l.getData),console.log("user",g.value),!g.value.id)return void u.A.create({color:"negative",message:"User not logged in, please login again",position:"top"});console.log("user",g.value),v.value={fullname:"",birth_date:"",gender:"",contact_no:""},console.log("user",g);const{data:e,error:a}=await n.supabase.from("Profile").select("*").eq("id",g.value.id);a?console.log("Profile",a):(v.value.fullname=e[0].last_name+", "+e[0].first_name+" "+e[0].middle_name,v.value.birth_date=e[0].birth_date,v.value.contact_no=e[0].contact_no,v.value.gender=e[0].gender)}catch(e){console.log("Profile",e)}await A(),await F()}),(e,a)=>{const l=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-card"),n=(0,t.g2)("q-space"),d=(0,t.g2)("q-icon"),s=(0,t.g2)("q-input"),u=(0,t.g2)("q-btn"),r=(0,t.g2)("q-table"),g=(0,t.g2)("q-date"),A=(0,t.g2)("q-card-actions"),D=(0,t.g2)("q-dialog"),F=(0,t.g2)("q-page"),q=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(F,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",c,[(0,t.bF)(i,{bordered:"",class:"col-12"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>a[10]||(a[10]=[(0,t.Lk)("div",{class:"text-h6"},"Patient Details",-1)])),_:1,__:[10]}),(0,t.bF)(l,{class:"q-pt-none"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null," Name: "+(0,o.v_)(v.value.fullname),1),(0,t.Lk)("div",null," Date of Birth: "+(0,o.v_)(v.value.birth_date),1),(0,t.Lk)("div",null," Gender: "+(0,o.v_)(v.value.gender),1),(0,t.Lk)("div",null," Contact Number: "+(0,o.v_)(v.value.contact_no),1)]),_:1})]),_:1}),(0,t.bF)(n),(0,t.Lk)("div",m,[(0,t.bF)(r,{flat:"",title:"Medications ",rows:f.value,columns:_,"no-data-label":"I didn't find anything for you",filter:b.value,"rows-per-page-options":[3,6,9,10,0],"row-key":"name",dark:"",color:"primary"},{"top-right":(0,t.k6)(()=>[(0,t.bF)(s,{borderless:"",debounce:"300",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),placeholder:"Search"},{append:(0,t.k6)(()=>[(0,t.bF)(d,{name:"search"})]),_:1},8,["modelValue"]),(0,t.bF)(u,{color:"primary",label:"add",onClick:a[1]||(a[1]=e=>p.value=!0)})]),_:1},8,["rows","filter"]),(0,t.bF)(D,{modelValue:p.value,"onUpdate:modelValue":a[9]||(a[9]=e=>p.value=e),persistent:""},{default:(0,t.k6)(()=>[(0,t.bF)(i,{style:{"min-width":"350px"}},{default:(0,t.k6)(()=>[(0,t.bF)(l,{class:"items-center text-dark"},{default:(0,t.k6)(()=>[(0,t.bF)(s,{bordered:"",modelValue:h.value.medication,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value.medication=e),label:"Medications:",placeholder:"(Generic(Brand Name))",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(s,{bordered:"",modelValue:h.value.dose,"onUpdate:modelValue":a[3]||(a[3]=e=>h.value.dose=e),label:"Dose:",placeholder:"(1 tablet/capsule)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(s,{bordered:"",modelValue:h.value.frequency,"onUpdate:modelValue":a[4]||(a[4]=e=>h.value.frequency=e),label:"Frequency:",placeholder:"(1 X A DAY)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(s,{bordered:"",modelValue:h.value.timing,"onUpdate:modelValue":a[5]||(a[5]=e=>h.value.timing=e),label:"Timing:",placeholder:"(8AM-2PM-8PM)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(s,{bordered:"",modelValue:h.value.duration,"onUpdate:modelValue":a[6]||(a[6]=e=>h.value.duration=e),label:"Duration:",placeholder:"(Good for 7days/AS NEEDED/MAINTENANCE)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(s,{bordered:"",modelValue:h.value.special_instructions,"onUpdate:modelValue":a[7]||(a[7]=e=>h.value.special_instructions=e),label:"Special Instructions:",placeholder:"(Optional)"},null,8,["modelValue"]),(0,t.bF)(g,{title:"Date Issued:",subtitle:"Date medication was issued on",modelValue:h.value.date_issued,"onUpdate:modelValue":a[8]||(a[8]=e=>h.value.date_issued=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(A,{align:"right"},{default:(0,t.k6)(()=>[(0,t.bo)((0,t.bF)(u,{flat:"",label:"Cancel",color:"primary"},null,512),[[q]]),(0,t.bo)((0,t.bF)(u,{flat:"",label:"Add Medication Record",color:"primary",onClick:V},null,512),[[q]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),(0,t.bF)(i,{bordered:"",class:"col-12"},{default:(0,t.k6)(()=>[(0,t.bF)(l,null,{default:(0,t.k6)(()=>a[11]||(a[11]=[(0,t.Lk)("div",{class:"text-h6"},"Latest Admission Details",-1)])),_:1,__:[11]}),(0,t.bF)(l,{class:"q-pt-none"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null," Hospital: "+(0,o.v_)(k.value.hospital_name),1),(0,t.Lk)("div",null," Date of Admitted: "+(0,o.v_)(k.value.date_admitted),1),(0,t.Lk)("div",null," Date Discharged: "+(0,o.v_)(k.value.date_discharged),1),(0,t.Lk)("div",null," Final Diagnosis: "+(0,o.v_)(k.value.final_diagnosis),1)]),_:1})]),_:1})])]),_:1})}}});var v=l(5013),p=l(3341),b=l(222),f=l(5873),_=l(3261),h=l(6067),k=l(3933),A=l(9039),V=l(45),D=l(5626),F=l(5034),q=l(8657),y=l(272),w=l.n(y);const L=g,M=L;w()(g,"components",{QPage:v.A,QCard:p.A,QCardSection:b.A,QSpace:f.A,QTable:_.A,QInput:h.A,QIcon:k.A,QBtn:A.A,QDialog:V.A,QDate:D.A,QCardActions:F.A}),w()(g,"directives",{ClosePopup:q.A})}}]);