"use strict";(globalThis["webpackChunkmyhealth"]=globalThis["webpackChunkmyhealth"]||[]).push([[245],{1009:(e,a,l)=>{l.d(a,{s:()=>o});var t=l(705);const o=(0,t.nY)("userAuth",{state:()=>({user:{id:"",role:"",patients:[]}}),getters:{getData:e=>e.user},actions:{logout(){localStorage.clear()},setData(e){this.$state.user={id:e.id??"",role:e.role??"",patients:e.patients??[]}},loadData(){return localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):{}}}})},9245:(e,a,l)=>{l.r(a),l.d(a,{default:()=>M});var t=l(1347),o=l(7763),i=l(4187),n=l(3031),d=l(1009),s=l(144),u=l(9667);const r={class:"q-pa-md q-gutter-md"},c={key:0,class:"row items-center"},m={class:"col-12"},v=(0,t.pM)({__name:"profilePage",setup(e){const a=new Date,l=(0,d.s)(),v=(0,i.KR)(),g=(0,i.KR)(),p=(0,i.KR)({id:"",role:"",patients:[""]}),b=(0,i.KR)({fullname:"",birth_date:"",gender:"",contact_no:""}),f=(0,i.KR)(!1),_=(0,i.KR)(),h=(0,i.KR)([]),k=[{name:"medication",label:"Medication (Generic/Brand Name)",align:"left",field:"medication"},{name:"dose",label:"Dose",align:"left",field:"dose"},{name:"frequency",label:"Frequency",align:"left",field:"frequency"},{name:"timing",label:"Timing",align:"left",field:"timing"},{name:"duration",label:"Duration",align:"left",field:"duration"},{name:"special_instructions",label:"Special Instructions",align:"left",field:"special_instructions"},{name:"date_issued",label:"Date Issued",align:"left",field:"date_issued",sortable:!0}],A=(0,i.KR)({id:"",medication:"",dose:"",frequency:"",timing:"",duration:"",special_instructions:"",date_issued:(0,i.KR)(a)}),V=(0,i.KR)({hospital_name:"",date_admitted:"",date_discharged:"",final_diagnosis:""});async function y(){v.value?(g.value=await D(),g.value?(console.log("Patient ID:",g.value),await q(g.value.id),await L(g.value.id),await F(g.value.id)):(b.value={fullname:"",birth_date:"",gender:"",contact_no:""},V.value={hospital_name:"",date_admitted:"",date_discharged:"",final_diagnosis:""},h.value=[],s.A.create({color:"negative",message:"Patient not found",position:"top"}))):s.A.create({color:"negative",message:"Please select a patient",position:"top"})}async function D(){const{data:e,error:a}=await n.supabase.from("Roles").select("id").ilike("full_name",`%${v.value}%`).limit(1).single();return a?(console.log("Patients",a),null):(console.log("Patients",e),e)}async function F(e){b.value={fullname:"",birth_date:"",gender:"",contact_no:""};const{data:a,error:l}=await n.supabase.from("Profile").select("*").eq("id",e).single();l?console.log("Profile",l):(b.value.fullname=a.last_name+", "+a.first_name+" "+a.middle_name,b.value.birth_date=a.birth_date,b.value.contact_no=a.contact_no,b.value.gender=a.gender)}async function q(e){const{data:a,error:l}=await n.supabase.from("Medications").select("*").eq("id",e);l?console.log("Medication",l):(h.value=a,console.log("Medication",h))}async function w(e){s.A.create({spinner:u.A,message:"Working...",position:"top",timeout:1e3}),A.value.id=e;const{error:a}=await n.supabase.from("Medications").insert(A.value);a?s.A.create({color:"negative",message:"Danger can't add record",position:"top"}):(s.A.create({color:"posteal",message:"Added new medication record",position:"top"}),P(),await q(e))}function P(){A.value.medication="",A.value.dose="",A.value.frequency="",A.value.timing="",A.value.duration="",A.value.special_instructions=""}async function L(e){const{data:a,error:l}=await n.supabase.from("HospitalAdmission").select("*").eq("id",e).order("date_admitted",{ascending:!0}).limit(1).single();l?console.log("LatestAdmission",l):(V.value=a,console.log("LatestAdmission",a))}return(0,t.sV)(async()=>{try{if(await l.loadData(),p.value=l.getData,"Patient"===p.value.role?(g.value=p.value,console.log("Patient ID:",g.value.id),await q(g.value.id),await L(g.value.id),await F(g.value.id)):g.value=await D(),!p.value.id)return void s.A.create({color:"negative",message:"User not logged in, please login again",position:"top"})}catch(e){console.log("Error loading user data:",e)}console.log(p)}),(e,a)=>{const l=(0,t.g2)("q-select"),i=(0,t.g2)("q-card-section"),n=(0,t.g2)("q-card"),d=(0,t.g2)("q-space"),s=(0,t.g2)("q-icon"),u=(0,t.g2)("q-input"),D=(0,t.g2)("q-btn"),F=(0,t.g2)("q-table"),q=(0,t.g2)("q-date"),P=(0,t.g2)("q-card-actions"),L=(0,t.g2)("q-dialog"),M=(0,t.g2)("q-page"),Q=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(M,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",r,["Patient"!==p.value.role?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(l,{class:"col-10",modelValue:v.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>v.value=e),y],options:p.value.patients,label:"Patient Name"},null,8,["modelValue","options"])])):(0,t.Q3)("",!0),(0,t.bF)(n,{bordered:"",class:"col-12"},{default:(0,t.k6)(()=>[(0,t.bF)(i,null,{default:(0,t.k6)(()=>a[12]||(a[12]=[(0,t.Lk)("div",{class:"text-h6"},"Patient Details",-1)])),_:1,__:[12]}),(0,t.bF)(i,{class:"q-pt-none"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null," Name: "+(0,o.v_)(b.value.fullname),1),(0,t.Lk)("div",null," Date of Birth: "+(0,o.v_)(b.value.birth_date),1),(0,t.Lk)("div",null," Gender: "+(0,o.v_)(b.value.gender),1),(0,t.Lk)("div",null," Contact Number: "+(0,o.v_)(b.value.contact_no),1)]),_:1})]),_:1}),(0,t.bF)(d),(0,t.Lk)("div",m,[(0,t.bF)(F,{flat:"",title:"Medications ",rows:h.value,columns:k,"no-data-label":"I didn't find anything for you",filter:_.value,"rows-per-page-options":[3,6,9,10,0],"row-key":"name",dark:"",color:"primary"},{"top-right":(0,t.k6)(()=>[(0,t.bF)(u,{dark:"",borderless:"",debounce:"300",modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=e=>_.value=e),placeholder:"Search"},{append:(0,t.k6)(()=>[(0,t.bF)(s,{name:"search"})]),_:1},8,["modelValue"]),(0,t.bF)(D,{color:"primary",label:"add",onClick:a[2]||(a[2]=e=>f.value=!0)})]),_:1},8,["rows","filter"]),(0,t.bF)(L,{modelValue:f.value,"onUpdate:modelValue":a[11]||(a[11]=e=>f.value=e),persistent:""},{default:(0,t.k6)(()=>[(0,t.bF)(n,{style:{"min-width":"350px"}},{default:(0,t.k6)(()=>[(0,t.bF)(i,{class:"items-center text-dark"},{default:(0,t.k6)(()=>[(0,t.bF)(u,{bordered:"",modelValue:A.value.medication,"onUpdate:modelValue":a[3]||(a[3]=e=>A.value.medication=e),label:"Medications:",placeholder:"(Generic(Brand Name))",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{bordered:"",modelValue:A.value.dose,"onUpdate:modelValue":a[4]||(a[4]=e=>A.value.dose=e),label:"Dose:",placeholder:"(1 tablet/capsule)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{bordered:"",modelValue:A.value.frequency,"onUpdate:modelValue":a[5]||(a[5]=e=>A.value.frequency=e),label:"Frequency:",placeholder:"(1 X A DAY)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{bordered:"",modelValue:A.value.timing,"onUpdate:modelValue":a[6]||(a[6]=e=>A.value.timing=e),label:"Timing:",placeholder:"(8AM-2PM-8PM)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{bordered:"",modelValue:A.value.duration,"onUpdate:modelValue":a[7]||(a[7]=e=>A.value.duration=e),label:"Duration:",placeholder:"(Good for 7days/AS NEEDED/MAINTENANCE)",rules:[e=>!!e||"This field should not be blank"]},null,8,["modelValue","rules"]),(0,t.bF)(u,{bordered:"",modelValue:A.value.special_instructions,"onUpdate:modelValue":a[8]||(a[8]=e=>A.value.special_instructions=e),label:"Special Instructions:",placeholder:"(Optional)"},null,8,["modelValue"]),(0,t.bF)(q,{title:"Date Issued:",subtitle:"Date medication was issued on",modelValue:A.value.date_issued,"onUpdate:modelValue":a[9]||(a[9]=e=>A.value.date_issued=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(P,{align:"right"},{default:(0,t.k6)(()=>[(0,t.bo)((0,t.bF)(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[Q]]),(0,t.bF)(D,{flat:"",label:"Add Medication Record",color:"primary",onClick:a[10]||(a[10]=e=>w(g.value.value.id))})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),(0,t.bF)(n,{bordered:"",class:"col-12"},{default:(0,t.k6)(()=>[(0,t.bF)(i,null,{default:(0,t.k6)(()=>a[13]||(a[13]=[(0,t.Lk)("div",{class:"text-h6"},"Latest Admission Details",-1)])),_:1,__:[13]}),(0,t.bF)(i,{class:"q-pt-none"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null," Hospital: "+(0,o.v_)(V.value.hospital_name),1),(0,t.Lk)("div",null," Date of Admitted: "+(0,o.v_)(V.value.date_admitted),1),(0,t.Lk)("div",null," Date Discharged: "+(0,o.v_)(V.value.date_discharged),1),(0,t.Lk)("div",null," Final Diagnosis: "+(0,o.v_)(V.value.final_diagnosis),1)]),_:1})]),_:1})])]),_:1})}}});var g=l(5013),p=l(5484),b=l(3341),f=l(222),_=l(5873),h=l(9698),k=l(6067),A=l(3933),V=l(9039),y=l(45),D=l(3713),F=l(5034),q=l(8657),w=l(272),P=l.n(w);const L=v,M=L;P()(v,"components",{QPage:g.A,QSelect:p.A,QCard:b.A,QCardSection:f.A,QSpace:_.A,QTable:h.A,QInput:k.A,QIcon:A.A,QBtn:V.A,QDialog:y.A,QDate:D.A,QCardActions:F.A}),P()(v,"directives",{ClosePopup:q.A})}}]);